import { NextRequest, NextResponse } from 'next/server';

export async function GET(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const { id } = await params;

    // Mock community data
    const mockCommunities: any = {
      '1': {
        id: '1',
        name: 'مجتمع المبدعين',
        description: 'مجتمع لرواد الأعمال والمبدعين لمشاركة الأفكار والخبرات',
        category: 'creators',
        members: 1250,
        posts: 450,
        views: 12500,
      },
      '2': {
        id: '2',
        name: 'مجتمع المستثمرين',
        description: 'مجتمع للمستثمرين لمناقشة الفرص الاستثمارية وتبادل الخبرات',
        category: 'investors',
        members: 850,
        posts: 320,
        views: 9800,
      },
      '3': {
        id: '3',
        name: 'مجتمع المسوقين',
        description: 'مجتمع للمسوقين لمشاركة استراتيجيات التسويق والنجاحات',
        category: 'marketers',
        members: 650,
        posts: 280,
        views: 7500,
      },
    };

    const community = mockCommunities[id];

    if (!community) {
      return NextResponse.json(
        { success: false, error: 'المجتمع غير موجود' },
        { status: 404 }
      );
    }

    return NextResponse.json({
      success: true,
      community,
      isMember: false, // Will be determined by session
    });
  } catch (error) {
    console.error('Community fetch error:', error);
    return NextResponse.json(
      { success: false, error: 'حدث خطأ أثناء جلب المجتمع' },
      { status: 500 }
    );
  }
}

